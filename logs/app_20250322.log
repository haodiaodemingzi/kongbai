[2025-03-22 16:56:02,981] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 16:56:02,987] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 16:56:03,038] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 16:56:03,155] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 16:56:03,161] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 16:56:03,162] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 16:56:03,175] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 16:56:03,176] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 16:56:03,176] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=16777216
[2025-03-22 16:56:08,174] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 16:56:08,175] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 16:56:08,195] [ERROR] [data_service:get_player_rankings:106] - 查询玩家记录时出错: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by, battle_record.id AS battle_record_id, battle_record.win AS battle_record_win, battle_record.lost AS battle_record_lost, battle_record.position AS battle_record_position, battle_record.remark AS battle_record_remark, battle_record.publish_at AS battle_record_publish_at, battle_record.created_at AS battle_record_created_at, battle_record.updated_at AS battle_record_updated_at, battle_record.deleted_at AS battle_record_deleted_at, battle_record.create_by AS battle_record_create_by, battle_record.update_by AS battle_record_update_by 
FROM person JOIN battle_record ON person.id = battle_record.create_by]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: person

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\data_service.py", line 103, in get_player_rankings
    player_records = query.all()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by, battle_record.id AS battle_record_id, battle_record.win AS battle_record_win, battle_record.lost AS battle_record_lost, battle_record.position AS battle_record_position, battle_record.remark AS battle_record_remark, battle_record.publish_at AS battle_record_publish_at, battle_record.created_at AS battle_record_created_at, battle_record.updated_at AS battle_record_updated_at, battle_record.deleted_at AS battle_record_deleted_at, battle_record.create_by AS battle_record_create_by, battle_record.update_by AS battle_record_update_by 
FROM person JOIN battle_record ON person.id = battle_record.create_by]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-03-22 16:56:19,410] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 16:56:28,401] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 16:56:28,401] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 16:56:28,409] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 16:56:28,411] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 16:56:28,411] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 16:56:28,412] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 16:56:28,413] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 16:56:28,416] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 16:56:28,416] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 16:56:28,417] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 16:56:28,426] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 16:56:28,430] [ERROR] [file_parser:parse_text_file:84] - 数据库连接测试失败: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by 
FROM person
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: person

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 81, in parse_text_file
    test_query = Person.query.limit(1).all()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by 
FROM person
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-03-22 16:56:28,448] [WARNING] [battle:upload_file:71] - 解析成功但数据库连接失败
[2025-03-22 16:56:28,772] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 16:56:28,773] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 16:56:28,775] [ERROR] [data_service:get_player_rankings:106] - 查询玩家记录时出错: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by, battle_record.id AS battle_record_id, battle_record.win AS battle_record_win, battle_record.lost AS battle_record_lost, battle_record.position AS battle_record_position, battle_record.remark AS battle_record_remark, battle_record.publish_at AS battle_record_publish_at, battle_record.created_at AS battle_record_created_at, battle_record.updated_at AS battle_record_updated_at, battle_record.deleted_at AS battle_record_deleted_at, battle_record.create_by AS battle_record_create_by, battle_record.update_by AS battle_record_update_by 
FROM person JOIN battle_record ON person.id = battle_record.create_by]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: person

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\data_service.py", line 103, in get_player_rankings
    player_records = query.all()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: person
[SQL: SELECT person.id AS person_id, person.name AS person_name, person.god AS person_god, person.union_name AS person_union_name, person.job AS person_job, person.level AS person_level, person.created_at AS person_created_at, person.updated_at AS person_updated_at, person.deleted_at AS person_deleted_at, person.create_by AS person_create_by, person.update_by AS person_update_by, battle_record.id AS battle_record_id, battle_record.win AS battle_record_win, battle_record.lost AS battle_record_lost, battle_record.position AS battle_record_position, battle_record.remark AS battle_record_remark, battle_record.publish_at AS battle_record_publish_at, battle_record.created_at AS battle_record_created_at, battle_record.updated_at AS battle_record_updated_at, battle_record.deleted_at AS battle_record_deleted_at, battle_record.create_by AS battle_record_create_by, battle_record.update_by AS battle_record_update_by 
FROM person JOIN battle_record ON person.id = battle_record.create_by]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-03-22 16:56:35,152] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 16:56:42,421] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 200, 处理时间: 32520ms
[2025-03-22 17:05:08,889] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:05:08,893] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:05:46,062] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:05:46,069] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:05:46,252] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:05:46,335] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:05:46,342] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:05:46,343] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:05:46,345] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:05:46,367] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:05:46,367] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:06:01,140] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:06:01,142] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:06:01,183] [ERROR] [data_service:get_player_rankings:106] - 查询玩家记录时出错: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\data_service.py", line 103, in get_player_rankings
    player_records = query.all()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:08:31,854] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:08:31,858] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:08:32,049] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:08:32,180] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:08:32,188] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:08:32,190] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:08:32,193] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:08:32,220] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:08:32,220] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:10:31,666] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:10:31,670] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:10:31,796] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:10:31,878] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:10:31,890] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:10:31,893] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:10:31,894] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:10:31,921] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:10:31,921] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:11:28,537] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:11:28,541] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:11:28,653] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:11:28,722] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:11:28,727] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:11:28,728] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:11:28,729] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:11:28,744] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:11:28,744] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:12:45,651] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:12:45,655] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:12:45,770] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:12:45,841] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:12:45,846] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:12:45,848] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:12:45,851] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:12:45,877] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:12:45,877] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:14:41,672] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:14:41,676] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:14:41,817] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:14:41,955] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:14:41,964] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:14:41,967] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:14:41,970] [ERROR] [__init__:create_app:53] - 数据库连接失败: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
Traceback (most recent call last):
  File "C:\coding\kongbai\app\__init__.py", line 49, in create_app
    db.session.execute(text('SELECT 1'))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
TypeError: Connection.__init__() got an unexpected keyword argument 'auth_plugin'. Did you mean 'auth_plugin_map'?
[2025-03-22 17:14:42,004] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:14:42,005] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:16:55,506] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:16:55,509] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:16:55,619] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:16:55,693] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:16:55,701] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:16:55,702] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:16:55,742] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:16:55,742] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:16:55,742] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:17:00,630] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:17:00,630] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:17:00,671] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:17:02,800] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:17:51,586] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:17:51,586] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 17:17:51,600] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 17:17:51,603] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:17:51,604] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:17:54,770] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:17:57,754] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 17:18:10,430] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 17:18:17,433] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 17:18:19,405] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 17:20:02,602] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:20:22,933] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:20:24,130] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 17:20:31,466] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 17:20:34,986] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 17:20:54,141] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 17:20:56,998] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 31 名玩家记录
[2025-03-22 17:21:07,907] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 2/41 个，缺少 39 个
[2025-03-22 17:21:32,013] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 39 个玩家记录
[2025-03-22 17:21:45,520] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:21:46,569] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 17:21:49,985] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 l局长的大奶l 在数据库中不存在
[2025-03-22 17:21:50,443] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 Quamx 在数据库中不存在
[2025-03-22 17:22:54,914] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:22:54,915] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 Cmenピ 在数据库中不存在
[2025-03-22 17:22:54,916] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:22:54,916] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 秋日的思绪 在数据库中不存在
[2025-03-22 17:22:54,916] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:22:54,934] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 0，错误 0，缺少玩家 582
[2025-03-22 17:22:54,935] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 17:22:54,935] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 眩晕盲涡】砂 在数据库中不存在
[2025-03-22 17:22:54,935] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 Quamx 在数据库中不存在
[2025-03-22 17:22:54,936] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 灬}域V随风灬 在数据库中不存在
[2025-03-22 17:22:54,936] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 ぐ狂γ飙べ 在数据库中不存在
[2025-03-22 17:22:54,936] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 17:22:54,941] [INFO] [file_parser:save_battle_log_to_db:410] - 已更新 0 条战绩记录的K/D比和总分
[2025-03-22 17:22:54,941] [INFO] [file_parser:save_battle_log_to_db:416] - 战斗日志保存完成，总处理时间: 139.15 秒
[2025-03-22 17:22:54,942] [INFO] [battle:upload_file:82] - 数据保存成功: 处理完成：0 条击杀记录，0 条祝福记录
[2025-03-22 17:22:54,943] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 303359ms
[2025-03-22 17:22:55,269] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:22:55,269] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:22:55,277] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:03,614] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:03,614] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 17:23:03,620] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:04,928] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:04,928] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 17:23:04,934] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:05,871] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:05,871] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 17:23:05,880] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:07,222] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:07,223] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:23:07,227] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:08,448] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:08,449] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 17:23:08,458] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:09,336] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:09,337] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 17:23:09,349] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:23:10,357] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:23:10,357] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 17:23:10,368] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:24:24,294] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:24:32,083] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:24:32,083] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 17:24:32,092] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 17:24:32,097] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:24:32,098] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:24:38,697] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:24:38,697] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 17:24:38,699] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 17:24:40,452] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 17:24:40,452] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 17:24:42,185] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:24:42,193] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:24:42,193] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 17:24:44,464] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 17:24:46,598] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 17:25:03,194] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 17:25:11,965] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 31 名玩家记录
[2025-03-22 17:36:09,265] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:36:09,269] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:36:09,379] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:36:09,449] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:36:09,454] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:36:09,455] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:36:09,473] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:36:09,474] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:36:09,474] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:40:59,385] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:40:59,394] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:40:59,567] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:40:59,704] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:40:59,710] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:40:59,711] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:40:59,750] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:40:59,751] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:40:59,751] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:41:13,148] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:41:13,152] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:41:13,283] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:41:13,390] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:41:13,394] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:41:13,396] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:41:13,428] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:41:13,429] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:41:13,429] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:41:22,437] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:41:22,443] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:41:22,596] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:41:22,667] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:41:22,671] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:41:22,672] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:41:22,693] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:41:22,694] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:41:22,694] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:41:42,228] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:41:42,232] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:41:42,346] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:41:42,423] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:41:42,428] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:41:42,429] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:41:42,456] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:41:42,456] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:41:42,457] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:44:09,878] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:44:09,882] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:44:10,020] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:44:10,116] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:44:10,122] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:44:10,123] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:44:10,149] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:44:10,150] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:44:10,150] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:44:33,441] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:44:33,446] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:44:33,559] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:44:33,626] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:44:33,630] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:44:33,631] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:44:33,649] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:44:33,649] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:44:33,650] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:44:45,584] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:44:45,585] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 17:44:45,594] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 17:44:45,597] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:44:45,598] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:44:58,360] [INFO] [__init__:index:41] - 访问根路径，重定向到战绩排名页面
[2025-03-22 17:44:58,679] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:44:58,680] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:44:58,706] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:45:00,807] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:45:08,646] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:45:08,647] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 17:45:08,650] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 17:45:08,654] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:45:08,654] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:45:15,780] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:45:15,780] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:45:15,781] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 17:45:15,781] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 17:45:15,788] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 17:45:15,789] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 17:45:20,364] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 17:45:20,364] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 17:45:20,365] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 17:45:20,365] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 17:45:23,598] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:45:25,675] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:45:25,682] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:45:25,682] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 17:45:26,832] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:45:26,832] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 17:45:27,296] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 17:45:27,302] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 17:45:27,315] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 17:45:27,692] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 17:45:28,793] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 17:46:26,339] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 17:46:26,344] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 17:46:26,484] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 17:46:26,576] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 17:46:26,580] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 17:46:26,582] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 17:46:26,606] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 17:46:26,606] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 17:46:26,606] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 17:46:52,371] [INFO] [__init__:index:41] - 访问根路径，重定向到战绩排名页面
[2025-03-22 17:46:52,628] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:46:52,628] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:46:52,650] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:46:55,096] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:47:03,539] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 17:47:03,539] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 17:47:03,552] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 17:47:03,556] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:47:03,557] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:47:03,557] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 17:47:03,558] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 17:47:03,562] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 17:47:03,563] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 17:47:03,565] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 17:47:03,580] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:47:03,590] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 17:47:03,591] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 17:47:03,592] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 17:47:03,595] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 17:47:03,595] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 17:47:03,601] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 0 名玩家记录
[2025-03-22 17:47:03,602] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 0/41 个，缺少 41 个
[2025-03-22 17:47:03,603] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 41 个玩家记录
[2025-03-22 17:47:03,603] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:47:03,604] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 17:47:03,604] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 l局长的大奶l 在数据库中不存在
[2025-03-22 17:47:03,605] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 Quamx 在数据库中不存在
[2025-03-22 17:47:03,605] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:47:03,605] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 Cmenピ 在数据库中不存在
[2025-03-22 17:47:03,605] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:47:03,606] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 秋日的思绪 在数据库中不存在
[2025-03-22 17:47:03,606] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 ∝小红绳 在数据库中不存在
[2025-03-22 17:47:03,606] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 Angel丶黛薰 在数据库中不存在
[2025-03-22 17:47:03,607] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 0，错误 0，缺少玩家 582
[2025-03-22 17:47:03,607] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 17:47:03,607] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 眩晕盲涡】砂 在数据库中不存在
[2025-03-22 17:47:03,608] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 Quamx 在数据库中不存在
[2025-03-22 17:47:03,608] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 灬}域V随风灬 在数据库中不存在
[2025-03-22 17:47:03,608] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 ぐ狂γ飙べ 在数据库中不存在
[2025-03-22 17:47:03,609] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 17:47:03,614] [INFO] [file_parser:save_battle_log_to_db:410] - 已更新 0 条战绩记录的K/D比和总分
[2025-03-22 17:47:03,614] [INFO] [file_parser:save_battle_log_to_db:416] - 战斗日志保存完成，总处理时间: 0.02 秒
[2025-03-22 17:47:03,615] [INFO] [battle:upload_file:82] - 数据保存成功: 处理完成：0 条击杀记录，0 条祝福记录
[2025-03-22 17:47:03,942] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:47:03,943] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 17:47:03,946] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:47:07,273] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:47:07,274] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 17:47:07,287] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:47:09,129] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:47:09,130] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 17:47:09,138] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:47:10,514] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:47:10,515] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 17:47:10,521] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 17:47:11,524] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 17:47:11,525] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 17:47:11,528] [INFO] [data_service:get_player_rankings:126] - 返回 0 名玩家的排名数据
[2025-03-22 18:23:35,449] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:23:35,455] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:23:35,604] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:23:35,733] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:23:35,738] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:23:35,740] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:23:35,761] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:23:35,762] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:23:35,762] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:35:30,070] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:35:30,083] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:35:30,251] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:35:30,327] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:35:30,331] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:35:30,332] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:35:30,351] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:35:30,352] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:35:30,352] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:35:35,914] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:35:43,809] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:35:43,810] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:35:43,815] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:35:43,819] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:35:43,819] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:35:43,819] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:35:43,820] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:35:43,824] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:35:43,825] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:35:43,825] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:35:43,835] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:35:43,857] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:35:43,858] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:35:43,859] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:35:43,864] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:35:43,865] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:35:43,944] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:35:43,946] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:35:43,946] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:35:43,947] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:35:43,993] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:35:44,002] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 457, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,010] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,015] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 464, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,032] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,034] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:35:44,044] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 17, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,046] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:35:44,052] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 16, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,058] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '笙歌君独幽', 'x_coord': 459, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,060] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:35:44,062] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': 'l局长的大奶l', 'x_coord': 450, 'y_coord': 475, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,066] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 487, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,069] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,073] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 486, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,078] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,082] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,087] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '秋日的思绪', 'x_coord': 452, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,093] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '『面具』', 'x_coord': 453, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,097] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Cmenピ', 'x_coord': 444, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,102] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 456, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,108] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 456, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,115] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,122] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,127] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,132] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 456, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,138] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,148] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 464, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,155] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,161] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,167] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 461, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,171] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 473, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,177] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 475, 'y_coord': 444, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,180] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 474, 'y_coord': 447, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,192] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 470, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,199] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 453, 'y_coord': 481, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,209] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 449, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,217] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '眩晕盲涡】砂', 'x_coord': 454, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,224] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 441, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,230] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 446, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,237] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,244] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 442, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,260] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,265] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 456, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,277] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 495, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,285] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,294] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,299] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 446, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,310] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '笙歌君独幽', 'x_coord': 453, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,316] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,325] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,334] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 457, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,343] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 461, 'y_coord': 454, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,349] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '笙歌君独幽', 'x_coord': 457, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,354] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 454, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,358] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,362] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '天若有情天V老', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,371] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '『面具』', 'x_coord': 488, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,376] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 487, 'y_coord': 420, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,381] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 487, 'y_coord': 438, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,386] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 508, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,392] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 492, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 4, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,395] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 488, 'y_coord': 434, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,401] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 487, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,407] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 490, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,413] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 497, 'y_coord': 427, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,418] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 494, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,423] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 479, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,428] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 496, 'y_coord': 430, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,434] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 510, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,440] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 501, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,443] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 493, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,449] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 440, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,453] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 483, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,459] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '青岛润泽制冷', 'x_coord': 548, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,463] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 452, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,468] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 444, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,472] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 447, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,477] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,482] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '温柔的奶娘', 'x_coord': 433, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,486] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 433, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,490] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 432, 'y_coord': 505, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,493] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 433, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,497] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 499, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,501] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 441, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,506] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,511] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 434, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,520] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,523] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 442, 'y_coord': 501, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,526] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 433, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,530] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 436, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,533] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 526, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,536] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 431, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,542] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '◇◆丨天涯～', 'x_coord': 440, 'y_coord': 522, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,547] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 438, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,550] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 434, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,553] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,557] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,562] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,566] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 439, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,570] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,575] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 521, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,581] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 548, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,586] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 442, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,595] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 532, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,599] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 435, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,604] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 520, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,609] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 437, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,614] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 517, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,618] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 440, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,624] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 445, 'y_coord': 504, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,628] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 449, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,632] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,638] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,642] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 437, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,648] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,653] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,658] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 426, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,665] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 420, 'y_coord': 527, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,674] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,679] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 435, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,683] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,689] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 414, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,694] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 405, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,700] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 421, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,703] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 433, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,709] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 424, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,718] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 426, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,724] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,729] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '天若有情天V老', 'x_coord': 431, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,733] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 411, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,737] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 428, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,741] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,745] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,749] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 423, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 27)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,755] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 429, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,761] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 420, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,770] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 11)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,777] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,782] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 436, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,787] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,793] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,797] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 36)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,801] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,806] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 436, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,812] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,820] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,825] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 436, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,828] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 450, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 50)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,834] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,839] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,846] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 557, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,853] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 561, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,857] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 442, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,863] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,868] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,874] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 566, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,881] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 436, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,888] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 441, 'y_coord': 560, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,896] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,913] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 468, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,924] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 480, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,939] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '小孩向前冲', 'x_coord': 456, 'y_coord': 565, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,955] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 474, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,974] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 477, 'y_coord': 547, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,985] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 479, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:44,997] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 481, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,009] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,021] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 470, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,037] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 481, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,047] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 472, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,058] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 485, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,069] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '小孩向前冲', 'x_coord': 478, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,077] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 494, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,085] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 486, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,095] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 482, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,103] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 481, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,114] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 490, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,121] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '小孩向前冲', 'x_coord': 485, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,129] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 492, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,136] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Quamx', 'x_coord': 483, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,147] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 472, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,158] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 472, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,168] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 487, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 35, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,194] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 463, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 34, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,205] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 491, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,213] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 475, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,220] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 477, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,225] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 451, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,234] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 458, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,243] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 468, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,257] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 449, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 31, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,264] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 450, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 29, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,270] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 27, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,280] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 512, 'y_coord': 440, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,289] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 546, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,295] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Quamx', 'x_coord': 553, 'y_coord': 498, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,301] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 521, 'y_coord': 500, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,322] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 494, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,340] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 516, 'y_coord': 171, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 305, in save_battle_log_to_db
    victim_record.lost += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,348] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 508, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,356] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 468, 'y_coord': 509, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,365] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 547, 'y_coord': 403, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,373] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 523, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,382] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 515, 'y_coord': 497, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,393] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 525, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 9, 15, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,402] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': 'l来来来来来来狗', 'x_coord': 575, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 8, 0, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,430] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 8，错误 203，缺少玩家 371
[2025-03-22 18:35:45,431] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:35:45,436] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,446] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,454] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,460] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:35:45,465] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:35:45,466] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:35:45,466] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:35:45,467] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:35:45,489] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    kd_ratio = record.win / record.lost if record.lost > 0 else record.win if record.win > 0 else 0
                                           ^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:35:45,497] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:35:45,499] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 1690ms
[2025-03-22 18:35:45,836] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:35:45,838] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:35:45,853] [ERROR] [battle:rankings:129] - 玩家排名页面渲染出错: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\routes\battle.py", line 117, in rankings
    player_rankings = get_player_rankings(faction=faction)
  File "C:\coding\kongbai\app\utils\data_service.py", line 119, in get_player_rankings
    'kd_ratio': battle_record.kd_ratio,
                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\models\player.py", line 66, in kd_ratio
    if self.lost > 0:
       ^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:36:56,210] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:36:56,219] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:36:56,457] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:36:56,657] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:36:56,670] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:36:56,671] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:36:56,712] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:36:56,714] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:36:56,715] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:36:57,981] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:37:04,063] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:37:04,063] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:37:04,074] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:37:04,078] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:37:04,079] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:37:04,080] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:37:04,082] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:37:04,085] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:37:04,086] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:37:04,087] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:37:04,099] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:37:04,135] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:37:04,135] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:37:04,136] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:37:04,142] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:37:04,142] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:37:04,249] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:37:04,253] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:37:04,255] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:37:04,255] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:37:04,265] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Quamx', 'x_coord': 514, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,280] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 503, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,288] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 453, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,298] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Angel丶黛薰', 'x_coord': 448, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,300] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:37:04,306] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,311] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 457, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,317] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,321] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 464, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,328] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,336] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,340] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:37:04,348] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 454, 'y_coord': 472, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,358] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 17, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,360] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:37:04,364] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 16, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,370] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '笙歌君独幽', 'x_coord': 459, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,372] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:37:04,378] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': 'l局长的大奶l', 'x_coord': 450, 'y_coord': 475, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,382] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 487, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,389] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,393] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 486, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,399] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,404] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,410] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '秋日的思绪', 'x_coord': 452, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,417] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '『面具』', 'x_coord': 453, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,422] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Cmenピ', 'x_coord': 444, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,427] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 456, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,432] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 456, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,437] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,443] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,448] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,453] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 456, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,460] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,464] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 464, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,468] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,472] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,476] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 461, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,480] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 473, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,485] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 475, 'y_coord': 444, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,491] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 474, 'y_coord': 447, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,497] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 470, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,501] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 453, 'y_coord': 481, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,507] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 449, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,511] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '眩晕盲涡】砂', 'x_coord': 454, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,517] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 441, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,522] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 446, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,527] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,534] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 442, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,544] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,548] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 456, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,556] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 495, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,560] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,565] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,572] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 446, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,579] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '笙歌君独幽', 'x_coord': 453, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,584] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,591] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,596] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 457, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,603] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 461, 'y_coord': 454, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,607] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '笙歌君独幽', 'x_coord': 457, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,612] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 454, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,616] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,619] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '天若有情天V老', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,624] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '『面具』', 'x_coord': 488, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,628] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 487, 'y_coord': 420, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,632] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 487, 'y_coord': 438, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,636] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 508, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,640] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 492, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 4, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,644] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 488, 'y_coord': 434, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,651] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 487, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,655] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 490, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,660] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 497, 'y_coord': 427, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,666] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 494, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,671] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 479, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,675] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 496, 'y_coord': 430, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,679] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 510, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,683] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 501, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,687] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 493, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,689] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 440, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,694] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 483, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,698] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '青岛润泽制冷', 'x_coord': 548, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,701] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 452, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,705] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 444, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,709] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 447, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,713] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,717] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '温柔的奶娘', 'x_coord': 433, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,720] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 433, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,723] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 432, 'y_coord': 505, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,727] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 433, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,731] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 499, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,734] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 441, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,738] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,741] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 434, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,744] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,747] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 442, 'y_coord': 501, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,753] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 433, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,757] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 436, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,760] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 526, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,764] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 431, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,768] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '◇◆丨天涯～', 'x_coord': 440, 'y_coord': 522, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,775] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 438, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,781] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 434, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,786] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,791] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,795] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,805] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 439, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,816] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,827] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 521, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,846] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 548, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,862] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 442, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,872] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 532, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,884] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 435, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,896] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 520, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,905] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 437, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,912] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 517, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,919] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 440, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,925] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 445, 'y_coord': 504, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,932] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 449, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,938] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,946] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,956] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 437, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,961] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,965] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,970] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 426, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,977] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 420, 'y_coord': 527, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,982] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:04,994] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 435, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,006] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,015] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 414, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,024] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 405, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,031] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 421, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,040] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 433, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,044] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 424, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,052] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 426, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,058] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,064] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '天若有情天V老', 'x_coord': 431, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,072] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 411, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,080] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 428, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,086] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,095] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,100] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 423, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 27)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,109] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 429, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,113] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 420, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,121] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 11)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,129] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,134] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 436, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,139] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,145] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,149] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 36)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,155] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,161] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 436, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,168] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,173] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,179] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 436, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,185] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 450, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 50)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,192] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,196] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,202] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 557, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,206] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 561, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,209] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 442, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,215] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,221] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,227] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 566, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,231] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 436, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,235] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 441, 'y_coord': 560, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,240] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,244] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 468, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,250] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 480, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,255] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '小孩向前冲', 'x_coord': 456, 'y_coord': 565, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,259] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 474, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,264] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 477, 'y_coord': 547, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,268] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 479, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,273] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 481, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,279] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,285] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 470, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,295] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 481, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,301] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 472, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,307] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 485, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,311] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '小孩向前冲', 'x_coord': 478, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,320] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 494, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,325] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 486, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,334] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 482, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,342] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 481, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,348] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 490, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,354] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '小孩向前冲', 'x_coord': 485, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,358] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 492, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,365] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Quamx', 'x_coord': 483, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,372] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 472, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,378] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 472, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,389] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 487, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 35, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,394] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 463, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 34, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,400] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 491, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,407] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 475, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,413] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 477, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,418] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 451, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,423] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 458, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,428] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 468, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,433] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 449, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 31, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,440] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 450, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 29, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,446] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 27, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,452] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 512, 'y_coord': 440, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,460] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 546, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,464] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Quamx', 'x_coord': 553, 'y_coord': 498, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,470] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 521, 'y_coord': 500, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,476] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '『面具』', 'victim_name': '◇◆丨天涯～', 'x_coord': 496, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 22, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,482] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 494, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,488] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 516, 'y_coord': 171, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,492] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 508, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,499] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 468, 'y_coord': 509, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,505] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 547, 'y_coord': 403, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,513] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 523, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,521] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 515, 'y_coord': 497, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,527] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 525, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 9, 15, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,533] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': 'l来来来来来来狗', 'x_coord': 575, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 8, 0, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,535] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 0，错误 211，缺少玩家 371
[2025-03-22 18:37:05,537] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:37:05,541] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,547] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,555] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,567] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:37:05,571] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:37:05,572] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:37:05,573] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:37:05,574] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:37:05,604] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    kd_ratio = record.win / record.lost if record.lost > 0 else record.win if record.win > 0 else 0
                                           ^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:37:05,616] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:37:05,619] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 1557ms
[2025-03-22 18:37:05,957] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:37:05,957] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:38:35,668] [INFO] [data_service:get_player_rankings:126] - 返回 17 名玩家的排名数据
[2025-03-22 18:38:35,740] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/rankings, 状态码: 200, 处理时间: 89785ms
[2025-03-22 18:38:43,428] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:38:43,433] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:38:43,587] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:38:43,666] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:38:43,671] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:38:43,672] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:38:43,688] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:38:43,689] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:38:43,689] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:38:54,352] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:39:04,887] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:39:04,887] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:39:04,897] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:39:04,901] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:39:04,901] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:39:04,902] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:39:04,903] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:39:04,906] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:39:04,907] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:39:04,907] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:39:04,920] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:39:04,949] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:39:04,949] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:39:04,949] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:39:04,952] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:39:04,953] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:39:05,024] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:39:05,028] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:39:05,028] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:39:05,029] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:39:05,034] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Quamx', 'x_coord': 514, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,041] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 503, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,045] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 453, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,048] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Angel丶黛薰', 'x_coord': 448, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 20, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,050] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:39:05,053] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,056] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 457, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,060] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,065] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 464, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,070] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,075] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,077] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:39:05,080] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 454, 'y_coord': 472, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,083] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 17, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,085] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:39:05,088] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 16, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,092] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '笙歌君独幽', 'x_coord': 459, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,093] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:39:05,095] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': 'l局长的大奶l', 'x_coord': 450, 'y_coord': 475, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,100] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 487, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,103] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,108] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 486, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,114] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,118] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,124] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '秋日的思绪', 'x_coord': 452, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,129] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '『面具』', 'x_coord': 453, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,134] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Cmenピ', 'x_coord': 444, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,139] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 456, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,145] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 456, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,151] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,159] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,167] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,173] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 456, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,180] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,188] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 464, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,194] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,211] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,215] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 461, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,219] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 473, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,222] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 475, 'y_coord': 444, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,226] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 474, 'y_coord': 447, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,230] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 470, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,234] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 453, 'y_coord': 481, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,239] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 449, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,243] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '眩晕盲涡】砂', 'x_coord': 454, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,246] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 441, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,249] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 446, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,254] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,258] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 442, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,261] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,265] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 456, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,268] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 495, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,270] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,274] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,278] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 446, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,281] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '笙歌君独幽', 'x_coord': 453, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,284] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,289] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,292] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 457, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,294] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 461, 'y_coord': 454, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,298] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '笙歌君独幽', 'x_coord': 457, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,301] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 454, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,304] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,307] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '天若有情天V老', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,310] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '『面具』', 'x_coord': 488, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,313] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 487, 'y_coord': 420, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,316] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 487, 'y_coord': 438, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,320] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 508, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,325] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 492, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 4, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,328] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 488, 'y_coord': 434, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,331] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 487, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,336] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 490, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,339] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 497, 'y_coord': 427, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,341] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 494, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,344] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 479, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,347] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 496, 'y_coord': 430, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,350] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 510, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,353] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 501, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,357] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 493, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,361] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 440, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,364] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 483, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,367] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '青岛润泽制冷', 'x_coord': 548, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,371] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 452, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,374] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 444, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,377] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 447, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,384] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,387] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '温柔的奶娘', 'x_coord': 433, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,392] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 433, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,396] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 432, 'y_coord': 505, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,401] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 433, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,407] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 499, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,411] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 441, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,417] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,421] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 434, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,424] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,428] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 442, 'y_coord': 501, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,432] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 433, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,435] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 436, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,441] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 526, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,446] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 431, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,450] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '◇◆丨天涯～', 'x_coord': 440, 'y_coord': 522, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,455] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 438, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,459] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 434, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,463] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,467] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,472] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,479] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 439, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,482] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,489] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 521, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,495] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 548, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,501] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 442, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,506] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 532, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,510] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 435, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,514] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 520, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,517] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 437, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,520] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 517, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,526] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 440, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,529] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 445, 'y_coord': 504, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,534] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 449, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,538] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,541] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,545] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 437, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,550] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,554] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,559] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 426, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,562] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 420, 'y_coord': 527, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,565] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,571] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 435, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,574] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,578] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 414, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,583] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 405, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,587] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 421, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,591] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 433, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,596] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 424, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,599] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 426, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,604] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,608] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '天若有情天V老', 'x_coord': 431, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,624] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 411, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,640] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 428, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,654] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,671] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,675] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 423, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 27)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,685] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 429, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,690] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 420, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,701] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 11)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,704] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,715] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 436, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,724] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,727] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,731] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 36)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,737] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,746] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 436, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,750] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,767] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,773] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 436, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,777] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 450, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 50)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,782] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,785] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,789] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 557, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,795] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 561, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,798] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 442, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,801] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,806] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,810] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 566, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,814] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 436, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,819] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 441, 'y_coord': 560, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,823] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,825] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 468, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,830] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 480, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,833] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '小孩向前冲', 'x_coord': 456, 'y_coord': 565, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,837] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 474, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,842] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 477, 'y_coord': 547, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,845] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 479, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,848] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 481, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,853] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,860] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 470, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,871] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 481, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,878] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 472, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,882] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 485, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,885] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '小孩向前冲', 'x_coord': 478, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,889] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 494, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,892] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 486, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,895] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 482, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,898] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 481, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,907] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 490, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,911] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '小孩向前冲', 'x_coord': 485, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,915] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 492, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,918] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Quamx', 'x_coord': 483, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,921] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 472, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,926] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 472, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,929] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 487, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 35, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,934] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 463, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 34, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,937] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 491, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,940] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 475, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,944] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 477, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,948] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 451, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,951] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 458, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,954] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 468, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,958] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 449, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 31, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,962] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 450, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 29, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,965] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 27, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,968] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 512, 'y_coord': 440, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,972] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 546, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,977] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Quamx', 'x_coord': 553, 'y_coord': 498, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,981] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 521, 'y_coord': 500, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,985] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '『面具』', 'victim_name': '◇◆丨天涯～', 'x_coord': 496, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 22, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,988] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 494, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,991] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 516, 'y_coord': 171, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:05,999] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 508, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,003] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 468, 'y_coord': 509, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,009] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 547, 'y_coord': 403, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,012] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 523, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,016] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 515, 'y_coord': 497, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,020] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 525, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 9, 15, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,023] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: can only concatenate str (not "int") to str, 详情: {'killer_name': 'Quamx', 'victim_name': 'l来来来来来来狗', 'x_coord': 575, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 8, 0, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 285, in save_battle_log_to_db
    killer_record.win += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,025] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 0，错误 211，缺少玩家 371
[2025-03-22 18:39:06,026] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:39:06,030] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,033] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,036] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,043] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:39:06,044] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:39:06,045] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:39:06,045] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:39:06,045] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:39:06,067] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    kd_ratio = record.win / record.lost if record.lost > 0 else record.win if record.win > 0 else 0
                                           ^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:39:06,072] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:39:06,073] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 1187ms
[2025-03-22 18:39:06,392] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:39:06,394] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:39:06,404] [INFO] [data_service:get_player_rankings:126] - 返回 17 名玩家的排名数据
[2025-03-22 18:39:10,193] [INFO] [battle:player_details:140] - 访问玩家详情页面，玩家ID: 1039
[2025-03-22 18:39:10,193] [INFO] [data_service:get_battle_details_by_player:133] - 获取玩家ID 1039 的战斗明细
[2025-03-22 18:39:10,205] [INFO] [data_service:get_battle_details_by_player:197] - 返回玩家 ぐ狂γ飙べ 的战斗明细
[2025-03-22 18:40:15,627] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:40:15,630] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:40:15,754] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:40:15,836] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:40:15,840] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:40:15,841] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:40:15,857] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:40:15,858] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:40:15,858] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:40:19,075] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:40:31,630] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:40:31,631] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:40:31,644] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:40:31,646] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:40:31,647] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:40:31,648] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:40:31,649] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:40:31,652] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:40:31,652] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:40:31,653] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:40:31,667] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:40:31,704] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:40:31,704] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:40:31,704] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:40:31,710] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:40:31,730] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:40:31,861] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:40:31,885] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:40:31,886] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:40:31,888] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:41:42,926] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 18:41:42,931] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 18:41:43,091] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 18:41:43,194] [INFO] [battle:<module>:17] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 18:41:43,200] [INFO] [__init__:create_app:36] - 蓝图已注册: /battle
[2025-03-22 18:41:43,202] [INFO] [__init__:create_app:47] - 检查数据库连接...
[2025-03-22 18:41:43,225] [INFO] [__init__:create_app:51] - 数据库连接正常
[2025-03-22 18:41:43,226] [INFO] [__init__:create_app:112] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 18:41:43,226] [INFO] [__init__:create_app:113] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 18:41:51,189] [INFO] [__init__:index:41] - 访问根路径，重定向到战绩排名页面
[2025-03-22 18:41:51,446] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:41:51,448] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:41:51,478] [INFO] [data_service:get_player_rankings:126] - 返回 17 名玩家的排名数据
[2025-03-22 18:41:54,290] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:41:59,672] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:41:59,673] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:41:59,685] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:41:59,689] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:41:59,690] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:41:59,690] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:41:59,691] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:41:59,695] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:41:59,695] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:41:59,696] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:41:59,713] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:41:59,722] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:41:59,723] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:41:59,724] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:41:59,729] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:41:59,748] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:41:59,850] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:41:59,870] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:41:59,870] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:41:59,871] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:42:22,113] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:42:22,113] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:42:22,121] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:42:22,124] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:42:22,126] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:42:22,127] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:42:22,128] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:42:22,132] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:42:22,132] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:42:22,133] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:42:22,145] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:42:22,155] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:42:22,155] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:42:22,156] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:42:22,159] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:42:22,176] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:42:22,293] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:42:22,314] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:42:22,315] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:42:22,315] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:42:50,271] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:42:50,319] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:42:50,339] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:42:50,356] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:42:51,109] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:42:51,185] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 51)}
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
    ~~~~~~~~~~^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
    ~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1213, 'Deadlock found when trying to get lock; try restarting transaction')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2230, in _execute_internal
    ) = compile_state_cls.orm_pre_session_exec(
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        False,
        ^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 561, in orm_pre_session_exec
    session._autoflush()
    ~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 3065, in _autoflush
    raise e.with_traceback(sys.exc_info()[2])
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 3054, in _autoflush
    self.flush()
    ~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        update,
        ^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
    ~~~~~~~~~~^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
    ~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-03-22 18:42:51,259] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 457, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,269] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 19, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,281] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 464, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,290] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,301] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 474, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,310] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:42:51,311] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 454, 'y_coord': 472, 'timestamp': datetime.datetime(2025, 3, 22, 10, 18, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,320] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 17, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,327] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:42:51,328] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 16, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,336] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '笙歌君独幽', 'x_coord': 459, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,342] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:42:51,344] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': 'l局长的大奶l', 'x_coord': 450, 'y_coord': 475, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,352] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 487, 'timestamp': datetime.datetime(2025, 3, 22, 10, 15, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,358] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,366] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 486, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,376] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 14, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,387] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 468, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,395] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '秋日的思绪', 'x_coord': 452, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,404] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '『面具』', 'x_coord': 453, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,413] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Cmenピ', 'x_coord': 444, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,424] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 456, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,438] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 456, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,447] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,457] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 451, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,470] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,480] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 456, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 12, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,489] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 457, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,498] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 464, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,505] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,514] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,522] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 464, 'y_coord': 461, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,531] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 473, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,540] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 475, 'y_coord': 444, 'timestamp': datetime.datetime(2025, 3, 22, 10, 11, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,548] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 474, 'y_coord': 447, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,556] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 470, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,565] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': 'l局长的大奶l', 'x_coord': 453, 'y_coord': 481, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 39)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,572] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 449, 'y_coord': 480, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,581] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': '眩晕盲涡】砂', 'x_coord': 454, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 10, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,589] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'l局长的大奶l', 'victim_name': 'Angel丶黛薰', 'x_coord': 441, 'y_coord': 490, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 56)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,602] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 446, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,611] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 443, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,619] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 442, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,631] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 478, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,642] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 456, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,653] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 446, 'y_coord': 495, 'timestamp': datetime.datetime(2025, 3, 22, 10, 9, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,662] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,672] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 477, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,680] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 446, 'y_coord': 479, 'timestamp': datetime.datetime(2025, 3, 22, 10, 8, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,690] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '笙歌君独幽', 'x_coord': 453, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,701] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 451, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,711] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 453, 'y_coord': 470, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,720] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 457, 'y_coord': 457, 'timestamp': datetime.datetime(2025, 3, 22, 10, 7, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,728] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 461, 'y_coord': 454, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,739] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '笙歌君独幽', 'x_coord': 457, 'y_coord': 466, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,747] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 454, 'y_coord': 469, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,761] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '笙歌君独幽', 'victim_name': 'Angel丶黛薰', 'x_coord': 443, 'y_coord': 494, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,775] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '天若有情天V老', 'x_coord': 467, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 10, 6, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,783] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '『面具』', 'x_coord': 488, 'y_coord': 441, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,794] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 487, 'y_coord': 420, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,803] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 487, 'y_coord': 438, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,814] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 508, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 5, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,825] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 492, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 4, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,837] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 488, 'y_coord': 434, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,846] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 487, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 3, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,855] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 490, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 51)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,867] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 497, 'y_coord': 427, 'timestamp': datetime.datetime(2025, 3, 22, 10, 2, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,878] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 494, 'y_coord': 428, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,888] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 479, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,896] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 496, 'y_coord': 430, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,907] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 510, 'y_coord': 431, 'timestamp': datetime.datetime(2025, 3, 22, 10, 1, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,914] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 501, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,924] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 493, 'y_coord': 429, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,931] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '秋日的思绪', 'x_coord': 440, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 10, 0)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,942] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 483, 'y_coord': 453, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,948] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '青岛润泽制冷', 'x_coord': 548, 'y_coord': 463, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,956] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 452, 'y_coord': 484, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,970] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 444, 'y_coord': 492, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,980] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 447, 'y_coord': 483, 'timestamp': datetime.datetime(2025, 3, 22, 9, 59, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:51,989] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 485, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,001] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '温柔的奶娘', 'x_coord': 433, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 58, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,015] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 433, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,032] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 432, 'y_coord': 505, 'timestamp': datetime.datetime(2025, 3, 22, 9, 57, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,041] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 433, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,049] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 499, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,059] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '笙歌君独幽', 'x_coord': 441, 'y_coord': 488, 'timestamp': datetime.datetime(2025, 3, 22, 9, 56, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,065] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 503, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,073] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 434, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,081] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 449, 'y_coord': 513, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55, 8)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,088] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 442, 'y_coord': 501, 'timestamp': datetime.datetime(2025, 3, 22, 9, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,098] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 433, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,105] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 436, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,113] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 526, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,122] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 431, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,134] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '◇◆丨天涯～', 'x_coord': 440, 'y_coord': 522, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,145] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 438, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,155] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 434, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,165] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,175] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,184] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 436, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,195] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 439, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,205] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,215] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '笙歌君独幽', 'x_coord': 435, 'y_coord': 521, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,227] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 548, 'timestamp': datetime.datetime(2025, 3, 22, 9, 53, 7)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,235] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 442, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,246] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 435, 'y_coord': 532, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 35)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,255] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 435, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,266] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 520, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,276] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 437, 'y_coord': 512, 'timestamp': datetime.datetime(2025, 3, 22, 9, 52, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,287] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 440, 'y_coord': 517, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 55)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,297] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 440, 'y_coord': 515, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,308] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '灬}域V随风灬', 'x_coord': 445, 'y_coord': 504, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,331] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 449, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,347] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,360] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,379] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': '眩晕盲涡】砂', 'x_coord': 437, 'y_coord': 507, 'timestamp': datetime.datetime(2025, 3, 22, 9, 51, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,392] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,403] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,410] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '梵※高', 'x_coord': 426, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,423] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'Angel丶黛薰', 'x_coord': 420, 'y_coord': 527, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,432] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,442] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '天若有情天V老', 'x_coord': 435, 'y_coord': 528, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,449] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '梵※高', 'x_coord': 438, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,455] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 414, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 15)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,464] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 405, 'y_coord': 539, 'timestamp': datetime.datetime(2025, 3, 22, 9, 50, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,472] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 421, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,479] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 433, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,489] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 424, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 19)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,498] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 426, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 14)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,506] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,514] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '天若有情天V老', 'x_coord': 431, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,522] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '『面具』', 'x_coord': 411, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,527] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '梵※高', 'victim_name': 'Cmenピ', 'x_coord': 428, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,538] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 18:42:52,539] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 425, 'y_coord': 529, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 49)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,546] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:42:52,546] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,552] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:42:52,554] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 423, 'y_coord': 533, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 27)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,560] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:42:52,562] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Angel丶黛薰', 'x_coord': 429, 'y_coord': 531, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,568] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:42:52,571] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 420, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 12)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,578] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record.remark += 1
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:42:52,581] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 48, 11)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,582] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:42:52,590] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Angel丶黛薰', 'victim_name': '梵※高', 'x_coord': 434, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 52)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,591] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:42:52,597] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 436, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 5)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,597] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:42:52,605] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '伊人问花语', 'victim_name': '梵※高', 'x_coord': 441, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 47, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,606] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:42:52,614] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 435, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,628] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '梵※高', 'x_coord': 443, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 36)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,650] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    kd_ratio = record.win / record.lost if record.lost > 0 else record.win if record.win > 0 else 0
                                           ^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:42:52,660] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 537, 'timestamp': datetime.datetime(2025, 3, 22, 9, 46, 4)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,663] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:42:52,674] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '『面具』', 'x_coord': 436, 'y_coord': 538, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,676] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 53004ms
[2025-03-22 18:42:52,685] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 442, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,695] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 436, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 28)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,707] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 436, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 45, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,717] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 450, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 50)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,725] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 450, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,731] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '∝小红绳', 'x_coord': 448, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 44, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,739] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 557, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,748] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 457, 'y_coord': 561, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 29)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,757] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '秋日的思绪', 'x_coord': 442, 'y_coord': 544, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,766] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 447, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 43, 10)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,773] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 447, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 54)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,781] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 449, 'y_coord': 566, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,788] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 436, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 24)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,797] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 441, 'y_coord': 560, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42, 20)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,804] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 455, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 9, 42)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,813] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 468, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,822] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 480, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,830] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '小孩向前冲', 'x_coord': 456, 'y_coord': 565, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,838] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 474, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,847] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 477, 'y_coord': 547, 'timestamp': datetime.datetime(2025, 3, 22, 9, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,855] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 479, 'y_coord': 542, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,866] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 481, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 9)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,877] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Cmenピ', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 523, 'timestamp': datetime.datetime(2025, 3, 22, 9, 40, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,886] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 470, 'y_coord': 535, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,896] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 481, 'y_coord': 552, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,907] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 472, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 2)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,918] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 485, 'y_coord': 550, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,931] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '小孩向前冲', 'x_coord': 478, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 38)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,941] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '灬}域V随风灬', 'x_coord': 494, 'y_coord': 556, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 25)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,950] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 486, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,960] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 482, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 38, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,969] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '天若有情天V老', 'x_coord': 481, 'y_coord': 541, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,982] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 490, 'y_coord': 511, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:52,993] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '小孩向前冲', 'x_coord': 485, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,005] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 492, 'y_coord': 534, 'timestamp': datetime.datetime(2025, 3, 22, 9, 37, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,020] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': 'Quamx', 'x_coord': 483, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 58)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,031] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'ぐ狂γ飙べ', 'x_coord': 472, 'y_coord': 555, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,043] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'ぐ狂γ飙べ', 'victim_name': '∝小红绳', 'x_coord': 472, 'y_coord': 540, 'timestamp': datetime.datetime(2025, 3, 22, 9, 36, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,056] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 487, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 35, 44)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,067] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 463, 'y_coord': 551, 'timestamp': datetime.datetime(2025, 3, 22, 9, 34, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,082] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 491, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,094] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 475, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 37)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,107] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': '秋日的思绪', 'x_coord': 477, 'y_coord': 549, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 34)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,121] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '唯爱、小宝', 'victim_name': '灬}域V随风灬', 'x_coord': 451, 'y_coord': 553, 'timestamp': datetime.datetime(2025, 3, 22, 9, 33, 18)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,130] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 458, 'y_coord': 554, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 59)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,143] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '∝小红绳', 'x_coord': 468, 'y_coord': 546, 'timestamp': datetime.datetime(2025, 3, 22, 9, 32, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,157] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 449, 'y_coord': 543, 'timestamp': datetime.datetime(2025, 3, 22, 9, 31, 16)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,170] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '∝小红绳', 'victim_name': 'Cmenピ', 'x_coord': 450, 'y_coord': 545, 'timestamp': datetime.datetime(2025, 3, 22, 9, 29, 33)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,181] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '秋日的思绪', 'victim_name': '灬}域V随风灬', 'x_coord': 483, 'y_coord': 536, 'timestamp': datetime.datetime(2025, 3, 22, 9, 27, 26)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,190] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 512, 'y_coord': 440, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 53)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,198] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 546, 'y_coord': 432, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 45)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,209] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Quamx', 'x_coord': 553, 'y_coord': 498, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 21)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,216] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '◇◆丨天涯～', 'x_coord': 521, 'y_coord': 500, 'timestamp': datetime.datetime(2025, 3, 22, 9, 25, 13)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,224] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '『面具』', 'victim_name': '◇◆丨天涯～', 'x_coord': 496, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 22, 32)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,233] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 494, 'y_coord': 445, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 48)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,241] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 516, 'y_coord': 171, 'timestamp': datetime.datetime(2025, 3, 22, 9, 21, 22)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,249] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 508, 'y_coord': 530, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 57)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,258] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'R非离', 'victim_name': 'Quamx', 'x_coord': 468, 'y_coord': 509, 'timestamp': datetime.datetime(2025, 3, 22, 9, 18, 30)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,266] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': '灬}域V随风灬', 'x_coord': 547, 'y_coord': 403, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 41)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,275] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': 'Cmenピ', 'x_coord': 523, 'y_coord': 502, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 17)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,280] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '灬}域V随风灬', 'victim_name': '眩晕盲涡】砂', 'x_coord': 515, 'y_coord': 497, 'timestamp': datetime.datetime(2025, 3, 22, 9, 17, 3)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,289] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': '眩晕盲涡】砂', 'victim_name': '灬}域V随风灬', 'x_coord': 525, 'y_coord': 482, 'timestamp': datetime.datetime(2025, 3, 22, 9, 15, 43)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,297] [ERROR] [file_parser:save_battle_log_to_db:321] - 处理击杀记录时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a), 详情: {'killer_name': 'Quamx', 'victim_name': 'l来来来来来来狗', 'x_coord': 575, 'y_coord': 573, 'timestamp': datetime.datetime(2025, 3, 22, 8, 0, 40)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 271, in save_battle_log_to_db
    killer_record = BattleRecord.query.filter_by(create_by=killer_id).first()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,305] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 332, in save_battle_log_to_db
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,311] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction')
[SQL: UPDATE battle_record SET lost=%(lost)s, updated_at=%(updated_at)s WHERE battle_record.id = %(battle_record_id)s]
[parameters: {'lost': 2, 'updated_at': datetime.datetime(2025, 3, 22, 18, 42, 51, 111268), 'battle_record_id': 31086}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-03-22 18:42:53,313] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 31201ms
[2025-03-22 18:42:53,325] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:42:53,325] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:42:53,336] [INFO] [data_service:get_player_rankings:126] - 返回 21 名玩家的排名数据
[2025-03-22 18:48:35,767] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:48:43,843] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:48:43,843] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:48:43,853] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:48:43,857] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:48:43,858] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:48:43,859] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:48:43,859] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:48:43,861] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:48:43,862] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:48:43,862] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:48:43,875] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:48:43,880] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:48:43,881] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:48:43,881] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:48:43,884] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:48:43,884] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:48:43,952] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:48:43,955] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:48:43,955] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:48:43,955] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:48:43,988] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:48:44,022] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:48:44,037] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:48:44,053] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:48:45,417] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 18:48:45,418] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:48:45,421] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record = BattleRecord.query.filter_by(create_by=player_id).first()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:48:45,426] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record = BattleRecord.query.filter_by(create_by=player_id).first()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:48:45,430] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record = BattleRecord.query.filter_by(create_by=player_id).first()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:48:45,437] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    player_record = BattleRecord.query.filter_by(create_by=player_id).first()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:48:45,439] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:48:45,440] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:48:45,440] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:48:45,440] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:48:45,457] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    CASE WHEN br.lost > 0 THEN ROUND(br.win / br.lost, 2) ELSE br.win END AS kd_ratio,
                                           ^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:48:45,465] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:48:45,467] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 1625ms
[2025-03-22 18:48:45,778] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:48:45,779] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:48:45,786] [INFO] [data_service:get_player_rankings:126] - 返回 21 名玩家的排名数据
[2025-03-22 18:48:58,319] [INFO] [battle:player_details:140] - 访问玩家详情页面，玩家ID: 1039
[2025-03-22 18:48:58,320] [INFO] [data_service:get_battle_details_by_player:133] - 获取玩家ID 1039 的战斗明细
[2025-03-22 18:48:58,332] [INFO] [data_service:get_battle_details_by_player:197] - 返回玩家 ぐ狂γ飙べ 的战斗明细
[2025-03-22 18:49:06,749] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:49:06,750] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 18:49:06,761] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 18:49:10,863] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:49:10,864] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 18:49:10,872] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 18:50:56,770] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:50:56,771] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 18:50:56,780] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-22 18:50:59,818] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:50:59,819] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 18:50:59,831] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 18:51:03,789] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:51:03,790] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 18:51:03,796] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 18:53:27,866] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:53:37,036] [INFO] [battle:upload_file:28] - 访问文件上传页面
[2025-03-22 18:53:37,036] [INFO] [battle:upload_file:31] - 收到文件上传请求
[2025-03-22 18:53:37,045] [INFO] [battle:upload_file:46] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 18:53:37,050] [INFO] [battle:upload_file:59] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:53:37,051] [INFO] [battle:upload_file:66] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:53:37,051] [INFO] [file_parser:parse_text_file:45] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 18:53:37,051] [INFO] [file_parser:parse_text_file:54] - 文件大小: 71433 字节
[2025-03-22 18:53:37,054] [INFO] [file_parser:parse_text_file:72] - 成功读取文件，共 1035 行
[2025-03-22 18:53:37,054] [INFO] [file_parser:parse_battle_log:109] - 开始解析日志内容
[2025-03-22 18:53:37,055] [INFO] [file_parser:parse_battle_log:114] - 日志共 1034 行
[2025-03-22 18:53:37,065] [INFO] [file_parser:parse_battle_log:188] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:53:37,070] [INFO] [battle:upload_file:76] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 18:53:37,070] [INFO] [battle:upload_file:78] - 开始将解析结果保存到数据库
[2025-03-22 18:53:37,070] [INFO] [file_parser:save_battle_log_to_db:201] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 18:53:37,072] [INFO] [file_parser:save_battle_log_to_db:214] - 开始保存战斗日志到数据库
[2025-03-22 18:53:37,073] [INFO] [file_parser:save_battle_log_to_db:226] - 战斗日志中共涉及 41 名玩家
[2025-03-22 18:53:37,145] [INFO] [file_parser:save_battle_log_to_db:233] - 数据库中查询到 1036 名玩家记录
[2025-03-22 18:53:37,148] [INFO] [file_parser:save_battle_log_to_db:242] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 18:53:37,149] [WARNING] [file_parser:save_battle_log_to_db:246] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 18:53:37,149] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:53:37,172] [WARNING] [file_parser:save_battle_log_to_db:326] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 18:53:37,208] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:53:37,219] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 18:53:37,234] [WARNING] [file_parser:save_battle_log_to_db:328] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 18:53:38,382] [INFO] [file_parser:save_battle_log_to_db:335] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 18:53:38,383] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 沿途有你 在数据库中不存在
[2025-03-22 18:53:38,385] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '眩晕盲涡】砂', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 10, 13, 23)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    'timestamp': blessing_data['timestamp']
    ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:53:38,408] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'Quamx', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 54, 1)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    'timestamp': blessing_data['timestamp']
    ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:53:38,411] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': '灬}域V随风灬', 'blessing_name': '梵天', 'timestamp': datetime.datetime(2025, 3, 22, 9, 49, 31)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    'timestamp': blessing_data['timestamp']
    ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:53:38,414] [ERROR] [file_parser:save_battle_log_to_db:378] - 处理祝福记录时出错: can only concatenate str (not "int") to str, 详情: {'player_name': 'ぐ狂γ飙べ', 'blessing_name': '比湿奴', 'timestamp': datetime.datetime(2025, 3, 22, 9, 39, 46)}
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 352, in save_battle_log_to_db
    'timestamp': blessing_data['timestamp']
    ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can only concatenate str (not "int") to str
[2025-03-22 18:53:38,415] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:53:38,415] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:53:38,415] [WARNING] [file_parser:save_battle_log_to_db:382] - 祝福接收者 123183 在数据库中不存在
[2025-03-22 18:53:38,416] [INFO] [file_parser:save_battle_log_to_db:390] - 开始更新玩家K/D比和总分
[2025-03-22 18:53:38,428] [ERROR] [file_parser:save_battle_log_to_db:424] - 保存战斗日志到数据库时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 398, in save_battle_log_to_db
    try:
    
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:53:38,433] [ERROR] [battle:upload_file:85] - 数据保存失败: 保存战斗日志时出错: '>' not supported between instances of 'str' and 'int'
[2025-03-22 18:53:38,434] [WARNING] [__init__:after_request:87] - 请求处理缓慢: /battle/upload, 状态码: 302, 处理时间: 1400ms
[2025-03-22 18:53:38,742] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:53:38,742] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 18:53:38,748] [INFO] [data_service:get_player_rankings:126] - 返回 21 名玩家的排名数据
[2025-03-22 18:53:49,545] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:53:49,545] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 18:53:49,557] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 18:53:52,618] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 18:53:52,619] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 18:53:52,629] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 19:01:47,654] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 19:01:47,655] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 19:01:47,660] [INFO] [data_service:get_player_rankings:126] - 返回 10 名玩家的排名数据
[2025-03-22 19:01:51,726] [INFO] [__init__:index:41] - 访问根路径，重定向到战绩排名页面
[2025-03-22 19:01:52,042] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 19:01:52,043] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:01:52,049] [INFO] [data_service:get_player_rankings:126] - 返回 21 名玩家的排名数据
[2025-03-22 19:01:58,923] [INFO] [battle:rankings:109] - 访问玩家排名页面
[2025-03-22 19:01:58,924] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:01:58,931] [INFO] [data_service:get_player_rankings:126] - 返回 21 名玩家的排名数据
[2025-03-22 19:02:08,467] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 19:02:08,471] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 19:02:08,671] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 19:02:08,831] [INFO] [battle:<module>:26] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 19:02:08,854] [INFO] [__init__:create_app:38] - 蓝图已注册: /battle, /
[2025-03-22 19:02:08,855] [INFO] [__init__:create_app:43] - 检查数据库连接...
[2025-03-22 19:02:08,884] [INFO] [__init__:create_app:47] - 数据库连接正常
[2025-03-22 19:02:08,885] [INFO] [__init__:create_app:108] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 19:02:08,886] [INFO] [__init__:create_app:109] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 19:02:09,150] [INFO] [battle:upload_file:37] - 访问文件上传页面
[2025-03-22 19:02:16,726] [INFO] [battle:upload_file:37] - 访问文件上传页面
[2025-03-22 19:02:16,727] [INFO] [battle:upload_file:40] - 收到文件上传请求
[2025-03-22 19:02:16,733] [INFO] [battle:upload_file:55] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 19:02:16,737] [INFO] [battle:upload_file:68] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:02:16,737] [INFO] [battle:upload_file:75] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:02:16,738] [INFO] [file_parser:parse_text_file:53] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:02:16,739] [INFO] [file_parser:parse_text_file:62] - 文件大小: 71433 字节
[2025-03-22 19:02:16,741] [INFO] [file_parser:parse_text_file:80] - 成功读取文件，共 1035 行
[2025-03-22 19:02:16,741] [INFO] [file_parser:parse_battle_log:117] - 开始解析日志内容
[2025-03-22 19:02:16,741] [INFO] [file_parser:parse_battle_log:122] - 日志共 1034 行
[2025-03-22 19:02:16,752] [INFO] [file_parser:parse_battle_log:196] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:02:16,776] [INFO] [battle:upload_file:85] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:02:16,776] [INFO] [battle:upload_file:87] - 开始将解析结果保存到数据库
[2025-03-22 19:02:16,776] [INFO] [file_parser:save_battle_log_to_db:209] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 19:02:16,779] [INFO] [file_parser:save_battle_log_to_db:222] - 开始保存战斗日志到数据库
[2025-03-22 19:02:16,780] [INFO] [file_parser:save_battle_log_to_db:227] - 正在清空battle_record表...
[2025-03-22 19:02:16,780] [ERROR] [file_parser:save_battle_log_to_db:233] - 清空battle_record表时出错: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 229, in save_battle_log_to_db
    db.session.execute("TRUNCATE TABLE battle_record")
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2149, in _execute_internal
    statement = coercions.expect(roles.StatementRole, statement)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
        element, argname=argname, **kw
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 621, in _literal_coercion
    return self._text_coercion(element, argname, **kw)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 614, in _text_coercion
    return _no_text_coercion(element, argname)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 584, in _no_text_coercion
    raise exc_cls(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.ArgumentError: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
[2025-03-22 19:02:16,792] [INFO] [file_parser:save_battle_log_to_db:237] - 尝试使用DELETE语句清空battle_record表...
[2025-03-22 19:02:16,812] [INFO] [file_parser:save_battle_log_to_db:240] - 使用DELETE语句清空battle_record表成功
[2025-03-22 19:02:16,813] [INFO] [file_parser:save_battle_log_to_db:255] - 战斗日志中共涉及 41 名玩家
[2025-03-22 19:02:16,879] [INFO] [file_parser:save_battle_log_to_db:262] - 数据库中查询到 1036 名玩家记录
[2025-03-22 19:02:16,882] [INFO] [file_parser:save_battle_log_to_db:271] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 19:02:16,882] [WARNING] [file_parser:save_battle_log_to_db:275] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 19:02:16,883] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:02:16,884] [WARNING] [file_parser:save_battle_log_to_db:335] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 19:02:16,886] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:02:16,886] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:02:16,887] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:02:17,240] [INFO] [file_parser:save_battle_log_to_db:341] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 19:02:17,240] [ERROR] [file_parser:save_battle_log_to_db:446] - 保存战斗日志到数据库时发生错误: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 359, in save_battle_log_to_db
    blessing_missing_player_count += 1
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:02:17,244] [ERROR] [battle:upload_file:94] - 数据保存失败: 保存战斗日志时出错: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:02:17,568] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:02:17,569] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:02:17,690] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:02:26,942] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:02:26,943] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 19:02:26,991] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:02:29,661] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:02:29,662] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:02:29,733] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:02:35,007] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:02:35,007] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 19:02:35,045] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:02:36,683] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:02:36,684] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 19:02:36,727] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:02:42,297] [INFO] [battle_report:generate_battle_report:29] - 开始生成战斗报告
[2025-03-22 19:02:42,298] [INFO] [battle_report:generate_battle_report:35] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:02:42,298] [INFO] [battle_report:generate_battle_report:40] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:02:42,299] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: name 'current_app' is not defined
Traceback (most recent call last):
  File "C:\coding\kongbai\app\routes\battle.py", line 213, in report
    report_path, report_data = generate_battle_report(start_date, end_date)
                               ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\utils\battle_report.py", line 49, in generate_battle_report
    os.makedirs(output_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\os.py", line 212, in makedirs
    head, tail = path.split(name)
                 ~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\ntpath.py", line 227, in split
    p = os.fspath(p)
TypeError: expected str, bytes or os.PathLike object, not NoneType

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 305, in report
    current_app.logger.error(f"生成战斗报告时出错: {str(e)}", exc_info=True)
    ^^^^^^^^^^^
NameError: name 'current_app' is not defined
[2025-03-22 19:02:50,262] [INFO] [battle_report:generate_battle_report:29] - 开始生成战斗报告
[2025-03-22 19:02:50,262] [INFO] [battle_report:generate_battle_report:35] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:02:50,262] [INFO] [battle_report:generate_battle_report:40] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:02:50,262] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: name 'current_app' is not defined
Traceback (most recent call last):
  File "C:\coding\kongbai\app\routes\battle.py", line 213, in report
    report_path, report_data = generate_battle_report(start_date, end_date)
                               ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\utils\battle_report.py", line 49, in generate_battle_report
    os.makedirs(output_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\os.py", line 212, in makedirs
    head, tail = path.split(name)
                 ~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\ntpath.py", line 227, in split
    p = os.fspath(p)
TypeError: expected str, bytes or os.PathLike object, not NoneType

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 305, in report
    current_app.logger.error(f"生成战斗报告时出错: {str(e)}", exc_info=True)
    ^^^^^^^^^^^
NameError: name 'current_app' is not defined
[2025-03-22 19:05:56,524] [INFO] [battle_report:generate_battle_report:29] - 开始生成战斗报告
[2025-03-22 19:05:56,525] [INFO] [battle_report:generate_battle_report:35] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:05:56,526] [INFO] [battle_report:generate_battle_report:40] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:05:56,527] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: name 'current_app' is not defined
Traceback (most recent call last):
  File "C:\coding\kongbai\app\routes\battle.py", line 213, in report
    reports_dir = os.path.join(current_app.root_path, '..', 'reports')
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\utils\battle_report.py", line 49, in generate_battle_report
    os.makedirs(output_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\os.py", line 212, in makedirs
    head, tail = path.split(name)
                 ~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\ntpath.py", line 227, in split
    p = os.fspath(p)
TypeError: expected str, bytes or os.PathLike object, not NoneType

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 305, in report
    score_leaders=score_leaders,
    
NameError: name 'current_app' is not defined
[2025-03-22 19:06:00,532] [WARNING] [__init__:page_not_found:94] - 404 错误: /players, 来源: http://localhost:5000/
[2025-03-22 19:06:03,533] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: leaderboard.html
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 429, in leaderboard
    end_date = None
           ^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: leaderboard.html
[2025-03-22 19:06:06,594] [INFO] [battle:upload_file:37] - 访问文件上传页面
[2025-03-22 19:06:14,264] [INFO] [battle:upload_file:37] - 访问文件上传页面
[2025-03-22 19:06:14,265] [INFO] [battle:upload_file:40] - 收到文件上传请求
[2025-03-22 19:06:14,270] [INFO] [battle:upload_file:55] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 19:06:14,273] [INFO] [battle:upload_file:68] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:06:14,274] [INFO] [battle:upload_file:75] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:06:14,275] [INFO] [file_parser:parse_text_file:53] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:06:14,276] [INFO] [file_parser:parse_text_file:62] - 文件大小: 71433 字节
[2025-03-22 19:06:14,278] [INFO] [file_parser:parse_text_file:80] - 成功读取文件，共 1035 行
[2025-03-22 19:06:14,278] [INFO] [file_parser:parse_battle_log:117] - 开始解析日志内容
[2025-03-22 19:06:14,279] [INFO] [file_parser:parse_battle_log:122] - 日志共 1034 行
[2025-03-22 19:06:14,286] [INFO] [file_parser:parse_battle_log:196] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:06:14,290] [INFO] [battle:upload_file:85] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:06:14,290] [INFO] [battle:upload_file:87] - 开始将解析结果保存到数据库
[2025-03-22 19:06:14,291] [INFO] [file_parser:save_battle_log_to_db:209] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 19:06:14,295] [INFO] [file_parser:save_battle_log_to_db:222] - 开始保存战斗日志到数据库
[2025-03-22 19:06:14,295] [INFO] [file_parser:save_battle_log_to_db:227] - 正在清空battle_record表...
[2025-03-22 19:06:14,296] [ERROR] [file_parser:save_battle_log_to_db:233] - 清空battle_record表时出错: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 229, in save_battle_log_to_db
    db.session.execute("TRUNCATE TABLE battle_record")
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2149, in _execute_internal
    statement = coercions.expect(roles.StatementRole, statement)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
        element, argname=argname, **kw
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 621, in _literal_coercion
    return self._text_coercion(element, argname, **kw)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 614, in _text_coercion
    return _no_text_coercion(element, argname)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 584, in _no_text_coercion
    raise exc_cls(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.ArgumentError: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
[2025-03-22 19:06:14,308] [INFO] [file_parser:save_battle_log_to_db:237] - 尝试使用DELETE语句清空battle_record表...
[2025-03-22 19:06:14,328] [INFO] [file_parser:save_battle_log_to_db:240] - 使用DELETE语句清空battle_record表成功
[2025-03-22 19:06:14,329] [INFO] [file_parser:save_battle_log_to_db:255] - 战斗日志中共涉及 41 名玩家
[2025-03-22 19:06:14,408] [INFO] [file_parser:save_battle_log_to_db:262] - 数据库中查询到 1036 名玩家记录
[2025-03-22 19:06:14,412] [INFO] [file_parser:save_battle_log_to_db:271] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 19:06:14,413] [WARNING] [file_parser:save_battle_log_to_db:275] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 19:06:14,413] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:06:14,414] [WARNING] [file_parser:save_battle_log_to_db:335] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 19:06:14,415] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:06:14,416] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:06:14,416] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:06:14,768] [INFO] [file_parser:save_battle_log_to_db:341] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 19:06:14,768] [ERROR] [file_parser:save_battle_log_to_db:446] - 保存战斗日志到数据库时发生错误: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 359, in save_battle_log_to_db
    blessing_missing_player_count += 1
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:06:14,772] [ERROR] [battle:upload_file:94] - 数据保存失败: 保存战斗日志时出错: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:06:15,084] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:15,085] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:06:15,149] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:06:23,144] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:23,145] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 19:06:23,188] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:06:25,225] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:25,226] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 19:06:25,275] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:06:26,592] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:26,593] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 19:06:26,598] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-22 19:06:28,306] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:28,306] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:06:28,408] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:06:29,494] [INFO] [battle:rankings:118] - 访问玩家排名页面
[2025-03-22 19:06:29,496] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:06:29,573] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:06:37,304] [INFO] [battle_report:generate_battle_report:29] - 开始生成战斗报告
[2025-03-22 19:06:37,305] [INFO] [battle_report:generate_battle_report:35] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:06:37,305] [INFO] [battle_report:generate_battle_report:40] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:06:37,305] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: name 'current_app' is not defined
Traceback (most recent call last):
  File "C:\coding\kongbai\app\routes\battle.py", line 213, in report
    reports_dir = os.path.join(current_app.root_path, '..', 'reports')
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\utils\battle_report.py", line 49, in generate_battle_report
    os.makedirs(output_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\os.py", line 212, in makedirs
    head, tail = path.split(name)
                 ~~~~~~~~~~^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\ntpath.py", line 227, in split
    p = os.fspath(p)
TypeError: expected str, bytes or os.PathLike object, not NoneType

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 305, in report
    score_leaders=score_leaders,
    
NameError: name 'current_app' is not defined
[2025-03-22 19:07:24,931] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 19:07:24,948] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 19:07:25,291] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 19:07:25,521] [INFO] [battle:<module>:26] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 19:07:25,553] [INFO] [__init__:create_app:38] - 蓝图已注册: /battle, /
[2025-03-22 19:07:25,554] [INFO] [__init__:create_app:43] - 检查数据库连接...
[2025-03-22 19:07:25,609] [INFO] [__init__:create_app:47] - 数据库连接正常
[2025-03-22 19:07:25,610] [INFO] [__init__:create_app:108] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 19:07:25,611] [INFO] [__init__:create_app:109] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 19:07:25,744] [INFO] [battle_report:generate_battle_report:29] - 开始生成战斗报告
[2025-03-22 19:07:25,745] [INFO] [battle_report:generate_battle_report:35] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:07:25,745] [INFO] [battle_report:generate_battle_report:40] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:07:25,746] [ERROR] [battle_report:generate_battle_report:193] - 生成战斗报告时发生错误: Textual SQL expression '\n        SELECT \n        ...' should be explicitly declared as text('\n        SELECT \n        ...')
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 95, in generate_battle_report
    result = db.session.execute(report_sql, params)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2149, in _execute_internal
    statement = coercions.expect(roles.StatementRole, statement)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
        element, argname=argname, **kw
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 621, in _literal_coercion
    return self._text_coercion(element, argname, **kw)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 614, in _text_coercion
    return _no_text_coercion(element, argname)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 584, in _no_text_coercion
    raise exc_cls(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.ArgumentError: Textual SQL expression '\n        SELECT \n        ...' should be explicitly declared as text('\n        SELECT \n        ...')
[2025-03-22 19:10:07,222] [INFO] [__init__:create_app:14] - 开始创建Flask应用程序
[2025-03-22 19:10:07,225] [INFO] [__init__:create_app:17] - 应用程序配置已加载，SECRET_KEY: you******
[2025-03-22 19:10:07,333] [INFO] [__init__:create_app:30] - 数据库扩展已初始化
[2025-03-22 19:10:07,410] [INFO] [battle:<module>:27] - 确保上传目录存在: C:\coding\kongbai\uploads
[2025-03-22 19:10:07,420] [INFO] [__init__:create_app:38] - 蓝图已注册: /battle, /
[2025-03-22 19:10:07,421] [INFO] [__init__:create_app:43] - 检查数据库连接...
[2025-03-22 19:10:07,446] [INFO] [__init__:create_app:47] - 数据库连接正常
[2025-03-22 19:10:07,447] [INFO] [__init__:create_app:108] - 应用程序已启动，环境: development, 调试模式: True
[2025-03-22 19:10:07,447] [INFO] [__init__:create_app:109] - 应用程序配置: UPLOAD_FOLDER=C:\coding\kongbai\uploads, MAX_CONTENT_LENGTH=10485760
[2025-03-22 19:10:10,702] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:10:10,703] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:10:10,703] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:10:10,747] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:10:10,753] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191010.csv
[2025-03-22 19:10:10,755] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    kd_leaders = sorted(report_data, key=lambda x: (
                 ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        x.get('kd_ratio', 0) if isinstance(x.get('kd_ratio'), (int, float))
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        else x.get('kills', 0) / x.get('deaths', 1) if x.get('deaths', 0) > 0
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        else x.get('kills', 0)
        ^^^^^^^^^^^^^^^^^^^^^^
    ), reverse=True)[:10]
    ^^^^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    else x.get('kills', 0) / x.get('deaths', 1) if x.get('deaths', 0) > 0
                                                   ^^^^^^^^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:00,991] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:00,991] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:00,991] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:01,026] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:01,028] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191300.csv
[2025-03-22 19:13:01,029] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:02,444] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:02,445] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:02,446] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:02,502] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:02,508] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191302.csv
[2025-03-22 19:13:02,509] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:02,926] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:02,926] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:02,927] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:02,971] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:02,977] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191302.csv
[2025-03-22 19:13:02,979] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:03,168] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:03,168] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:03,169] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:03,242] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:03,243] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:03,244] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:03,253] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:03,262] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191303.csv
[2025-03-22 19:13:03,264] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:03,312] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:03,315] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191303.csv
[2025-03-22 19:13:03,315] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:03,775] [INFO] [battle_report:generate_battle_report:30] - 开始生成战斗报告
[2025-03-22 19:13:03,775] [INFO] [battle_report:generate_battle_report:36] - 未指定结束日期，使用当前日期: 2025-03-22
[2025-03-22 19:13:03,776] [INFO] [battle_report:generate_battle_report:41] - 未指定开始日期，默认使用当天开始: 2025-03-22
[2025-03-22 19:13:03,813] [INFO] [battle_report:generate_battle_report:118] - 查询到 422 名玩家的战斗数据. 时间范围: 2025-03-22 至 2025-03-22
[2025-03-22 19:13:03,815] [INFO] [battle_report:generate_battle_report:131] - 战斗报告已保存为CSV文件: C:\coding\kongbai\app\..\reports\battle_report_20250322_20250322_20250322_191303.csv
[2025-03-22 19:13:03,816] [ERROR] [battle_report:generate_battle_report:191] - 生成战斗报告时发生错误: '>' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\battle_report.py", line 135, in generate_battle_report
    csv_writer = csv.writer(csvfile)
             ^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    
    
  File "C:\coding\kongbai\app\utils\battle_report.py", line 137, in <lambda>
    # 写入CSV头部
TypeError: '>' not supported between instances of 'str' and 'int'
[2025-03-22 19:13:10,646] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: leaderboard.html
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 442, in leaderboard
    start_date = datetime.strptime(start_date_str, '%Y-%m-%d')
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: leaderboard.html
[2025-03-22 19:13:13,536] [INFO] [battle:upload_file:38] - 访问文件上传页面
[2025-03-22 19:13:22,239] [INFO] [battle:upload_file:38] - 访问文件上传页面
[2025-03-22 19:13:22,239] [INFO] [battle:upload_file:41] - 收到文件上传请求
[2025-03-22 19:13:22,256] [INFO] [battle:upload_file:56] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-22 19:13:22,261] [INFO] [battle:upload_file:69] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:13:22,262] [INFO] [battle:upload_file:76] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:13:22,262] [INFO] [file_parser:parse_text_file:53] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-22 19:13:22,263] [INFO] [file_parser:parse_text_file:62] - 文件大小: 71433 字节
[2025-03-22 19:13:22,266] [INFO] [file_parser:parse_text_file:80] - 成功读取文件，共 1035 行
[2025-03-22 19:13:22,267] [INFO] [file_parser:parse_battle_log:117] - 开始解析日志内容
[2025-03-22 19:13:22,268] [INFO] [file_parser:parse_battle_log:122] - 日志共 1034 行
[2025-03-22 19:13:22,295] [INFO] [file_parser:parse_battle_log:196] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:13:22,369] [INFO] [battle:upload_file:86] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-22 19:13:22,370] [INFO] [battle:upload_file:88] - 开始将解析结果保存到数据库
[2025-03-22 19:13:22,371] [INFO] [file_parser:save_battle_log_to_db:209] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-22 19:13:22,379] [INFO] [file_parser:save_battle_log_to_db:222] - 开始保存战斗日志到数据库
[2025-03-22 19:13:22,380] [INFO] [file_parser:save_battle_log_to_db:227] - 正在清空battle_record表...
[2025-03-22 19:13:22,381] [ERROR] [file_parser:save_battle_log_to_db:233] - 清空battle_record表时出错: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 229, in save_battle_log_to_db
    db.session.execute("TRUNCATE TABLE battle_record")
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2149, in _execute_internal
    statement = coercions.expect(roles.StatementRole, statement)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
        element, argname=argname, **kw
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 621, in _literal_coercion
    return self._text_coercion(element, argname, **kw)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 614, in _text_coercion
    return _no_text_coercion(element, argname)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 584, in _no_text_coercion
    raise exc_cls(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.ArgumentError: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
[2025-03-22 19:13:22,403] [INFO] [file_parser:save_battle_log_to_db:237] - 尝试使用DELETE语句清空battle_record表...
[2025-03-22 19:13:22,427] [INFO] [file_parser:save_battle_log_to_db:240] - 使用DELETE语句清空battle_record表成功
[2025-03-22 19:13:22,427] [INFO] [file_parser:save_battle_log_to_db:255] - 战斗日志中共涉及 41 名玩家
[2025-03-22 19:13:22,553] [INFO] [file_parser:save_battle_log_to_db:262] - 数据库中查询到 1036 名玩家记录
[2025-03-22 19:13:22,556] [INFO] [file_parser:save_battle_log_to_db:271] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-22 19:13:22,557] [WARNING] [file_parser:save_battle_log_to_db:275] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-22 19:13:22,558] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:13:22,559] [WARNING] [file_parser:save_battle_log_to_db:335] - 击杀者 沿途有你 在数据库中不存在
[2025-03-22 19:13:22,561] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:13:22,561] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-22 19:13:22,562] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-22 19:13:23,078] [INFO] [file_parser:save_battle_log_to_db:341] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-22 19:13:23,079] [ERROR] [file_parser:save_battle_log_to_db:446] - 保存战斗日志到数据库时发生错误: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 359, in save_battle_log_to_db
    blessing_missing_player_count += 1
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:13:23,084] [ERROR] [battle:upload_file:95] - 数据保存失败: 保存战斗日志时出错: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-22 19:13:23,407] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-22 19:13:23,408] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-22 19:13:23,471] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:13:32,213] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-22 19:13:32,213] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-22 19:13:32,260] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:13:36,081] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-22 19:13:36,081] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-22 19:13:36,119] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-22 19:13:37,365] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-22 19:13:37,366] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-22 19:13:37,372] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-24 11:35:35,181] [CRITICAL] [__init__:handle_exception:105] - 未处理的异常: leaderboard.html
Traceback (most recent call last):
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\coding\kongbai\app\routes\battle.py", line 442, in leaderboard
    item[col] = row[idx]
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\flask\templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: leaderboard.html
[2025-03-24 11:35:40,277] [INFO] [battle:upload_file:38] - 访问文件上传页面
[2025-03-24 11:35:50,899] [INFO] [battle:upload_file:38] - 访问文件上传页面
[2025-03-24 11:35:50,900] [INFO] [battle:upload_file:41] - 收到文件上传请求
[2025-03-24 11:35:50,905] [INFO] [battle:upload_file:56] - 收到上传文件: ChatLog_2025_3_22_0.txt
[2025-03-24 11:35:50,907] [INFO] [battle:upload_file:69] - 文件已保存到: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-24 11:35:50,907] [INFO] [battle:upload_file:76] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-24 11:35:50,907] [INFO] [file_parser:parse_text_file:53] - 开始解析文件: C:\coding\kongbai\uploads\ChatLog_2025_3_22_0.txt
[2025-03-24 11:35:50,908] [INFO] [file_parser:parse_text_file:62] - 文件大小: 71433 字节
[2025-03-24 11:35:50,910] [INFO] [file_parser:parse_text_file:80] - 成功读取文件，共 1035 行
[2025-03-24 11:35:50,910] [INFO] [file_parser:parse_battle_log:117] - 开始解析日志内容
[2025-03-24 11:35:50,911] [INFO] [file_parser:parse_battle_log:122] - 日志共 1034 行
[2025-03-24 11:35:50,918] [INFO] [file_parser:parse_battle_log:196] - 解析完成，共找到 582 条击杀记录和 8 条祝福记录
[2025-03-24 11:35:50,932] [INFO] [battle:upload_file:86] - 文件解析成功: 成功解析 582 条击杀记录和 8 条祝福记录
[2025-03-24 11:35:50,933] [INFO] [battle:upload_file:88] - 开始将解析结果保存到数据库
[2025-03-24 11:35:50,933] [INFO] [file_parser:save_battle_log_to_db:209] - 开始保存战斗日志到数据库: 582条击杀记录, 8条祝福记录
[2025-03-24 11:35:50,936] [INFO] [file_parser:save_battle_log_to_db:222] - 开始保存战斗日志到数据库
[2025-03-24 11:35:50,936] [INFO] [file_parser:save_battle_log_to_db:227] - 正在清空battle_record表...
[2025-03-24 11:35:50,937] [ERROR] [file_parser:save_battle_log_to_db:233] - 清空battle_record表时出错: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 229, in save_battle_log_to_db
    db.session.execute("TRUNCATE TABLE battle_record")
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\scoping.py", line 779, in execute
    return self._proxied.execute(
           ~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2149, in _execute_internal
    statement = coercions.expect(roles.StatementRole, statement)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
        element, argname=argname, **kw
    )
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 621, in _literal_coercion
    return self._text_coercion(element, argname, **kw)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 614, in _text_coercion
    return _no_text_coercion(element, argname)
  File "c:\Users\me\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\coercions.py", line 584, in _no_text_coercion
    raise exc_cls(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.ArgumentError: Textual SQL expression 'TRUNCATE TABLE battle_rec...' should be explicitly declared as text('TRUNCATE TABLE battle_rec...')
[2025-03-24 11:35:50,943] [INFO] [file_parser:save_battle_log_to_db:237] - 尝试使用DELETE语句清空battle_record表...
[2025-03-24 11:35:50,954] [INFO] [file_parser:save_battle_log_to_db:240] - 使用DELETE语句清空battle_record表成功
[2025-03-24 11:35:50,954] [INFO] [file_parser:save_battle_log_to_db:255] - 战斗日志中共涉及 41 名玩家
[2025-03-24 11:35:51,030] [INFO] [file_parser:save_battle_log_to_db:262] - 数据库中查询到 1036 名玩家记录
[2025-03-24 11:35:51,033] [INFO] [file_parser:save_battle_log_to_db:271] - 战斗日志中的玩家在数据库中找到 22/41 个，缺少 19 个
[2025-03-24 11:35:51,033] [WARNING] [file_parser:save_battle_log_to_db:275] - 大量玩家在数据库中不存在，缺少 19 个玩家记录
[2025-03-24 11:35:51,033] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-24 11:35:51,034] [WARNING] [file_parser:save_battle_log_to_db:335] - 击杀者 沿途有你 在数据库中不存在
[2025-03-24 11:35:51,035] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-24 11:35:51,036] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 小傻帽 在数据库中不存在
[2025-03-24 11:35:51,037] [WARNING] [file_parser:save_battle_log_to_db:337] - 受害者 沿途有你 在数据库中不存在
[2025-03-24 11:35:51,341] [INFO] [file_parser:save_battle_log_to_db:341] - 击杀记录处理完成：成功 211，错误 0，缺少玩家 371
[2025-03-24 11:35:51,341] [ERROR] [file_parser:save_battle_log_to_db:446] - 保存战斗日志到数据库时发生错误: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
Traceback (most recent call last):
  File "C:\coding\kongbai\app\utils\file_parser.py", line 359, in save_battle_log_to_db
    blessing_missing_player_count += 1
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-24 11:35:51,345] [ERROR] [battle:upload_file:95] - 数据保存失败: 保存战斗日志时出错: cannot access local variable 'blessing_missing_player_count' where it is not associated with a value
[2025-03-24 11:35:51,666] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:35:51,667] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-24 11:35:51,742] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:40:51,928] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:40:51,929] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-24 11:40:52,031] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:40:54,213] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:40:54,213] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-24 11:40:54,359] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:40:59,658] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:40:59,659] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-24 11:40:59,742] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:43:04,673] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:43:04,674] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 11:43:04,707] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:43:07,943] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:43:07,943] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-24 11:43:07,952] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-24 11:53:12,405] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:12,406] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-24 11:53:12,410] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-24 11:53:16,274] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:16,274] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-24 11:53:16,340] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:53:19,647] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:19,648] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：None, 限制数量：30
[2025-03-24 11:53:19,719] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:53:22,947] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:22,948] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-24 11:53:22,982] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:53:33,901] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:33,902] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 11:53:33,946] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:53:43,114] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:43,114] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：梵天, 限制数量：30
[2025-03-24 11:53:43,161] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:53:44,017] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:53:44,019] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 11:53:44,062] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 11:56:03,023] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 11:56:05,811] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 12:01:50,921] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 12:01:50,922] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 12:01:50,968] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 12:01:58,979] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 12:01:58,980] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：湿婆, 限制数量：30
[2025-03-24 12:01:58,992] [INFO] [data_service:get_player_rankings:126] - 返回 1 名玩家的排名数据
[2025-03-24 12:02:00,939] [INFO] [battle:rankings:119] - 访问玩家排名页面
[2025-03-24 12:02:00,941] [INFO] [data_service:get_player_rankings:90] - 获取玩家排名，势力筛选：比湿奴, 限制数量：30
[2025-03-24 12:02:00,989] [INFO] [data_service:get_player_rankings:126] - 返回 30 名玩家的排名数据
[2025-03-24 12:02:02,584] [INFO] [battle:player_details:150] - 访问玩家详情页面，玩家ID: 1031
[2025-03-24 12:02:02,584] [INFO] [data_service:get_battle_details_by_player:133] - 获取玩家ID 1031 的战斗明细
[2025-03-24 12:02:02,598] [INFO] [data_service:get_battle_details_by_player:197] - 返回玩家 Quamx 的战斗明细
